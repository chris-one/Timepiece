{"ast":null,"code":"var _jsxFileName = \"/Users/matthewvilla/Desktop/Coding-Bootcamp/Group-Projects/Timepiece/client/src/components/ItemList/index.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport Item from '../Item';\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { UPDATE_ITEMS } from '../../utils/actions';\nimport { useQuery } from '@apollo/client';\nimport { QUERY_ITEMS } from '../../utils/queries';\nimport { idbPromise } from '../../utils/helpers';\nimport spinner from '../../assets/spinner.gif';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ItemList() {\n  _s();\n  const [state, dispatch] = useStoreContext();\n  const {\n    currentCategory\n  } = state;\n  const {\n    loading,\n    data\n  } = useQuery(QUERY_ITEMS);\n  useEffect(() => {\n    if (data) {\n      dispatch({\n        type: UPDATE_ITEMS,\n        items: data.items\n      });\n      data.items.forEach(item => {\n        idbPromise('items', 'put', item);\n      });\n    } else if (!loading) {\n      idbPromise('items', 'get').then(items => {\n        dispatch({\n          type: UPDATE_ITEMS,\n          items: items\n        });\n      });\n    }\n  }, [data, loading, dispatch]);\n  function filterItems() {\n    if (!currentCategory) {\n      return state.items;\n    }\n    return state.items.filter(item => item.category._id === currentCategory);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"my-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Our Items:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), state.items.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-row\",\n      children: filterItems().map(item => /*#__PURE__*/_jsxDEV(Item, {\n        _id: item._id,\n        image: item.image,\n        name: item.name,\n        price: item.price,\n        quantity: item.quantity\n      }, item._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"You haven't added any items yet!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: spinner,\n      alt: \"loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 18\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(ItemList, \"5EFEb9FYc1KGyEUAmLNh5IMPtTo=\", false, function () {\n  return [useStoreContext, useQuery];\n});\n_c = ItemList;\nexport default ItemList;\nvar _c;\n$RefreshReg$(_c, \"ItemList\");","map":{"version":3,"names":["React","useEffect","Item","useStoreContext","UPDATE_ITEMS","useQuery","QUERY_ITEMS","idbPromise","spinner","ItemList","state","dispatch","currentCategory","loading","data","type","items","forEach","item","then","filterItems","filter","category","_id","length","map","image","name","price","quantity"],"sources":["/Users/matthewvilla/Desktop/Coding-Bootcamp/Group-Projects/Timepiece/client/src/components/ItemList/index.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport Item from '../Item';\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { UPDATE_ITEMS } from '../../utils/actions';\nimport { useQuery } from '@apollo/client';\nimport { QUERY_ITEMS } from '../../utils/queries';\nimport { idbPromise } from '../../utils/helpers';\nimport spinner from '../../assets/spinner.gif';\n\nfunction ItemList() {\n  const [state, dispatch] = useStoreContext();\n\n  const { currentCategory } = state;\n\n  const { loading, data } = useQuery(QUERY_ITEMS);\n\n  useEffect(() => {\n    if (data) {\n      dispatch({\n        type: UPDATE_ITEMS,\n        items: data.items,\n      });\n      data.items.forEach((item) => {\n        idbPromise('items', 'put', item);\n      });\n    } else if (!loading) {\n      idbPromise('items', 'get').then((items) => {\n        dispatch({\n          type: UPDATE_ITEMS,\n          items: items,\n        });\n      });\n    }\n  }, [data, loading, dispatch]);\n\n  function filterItems() {\n    if (!currentCategory) {\n      return state.items;\n    }\n\n    return state.items.filter(\n      (item) => item.category._id === currentCategory\n    );\n  }\n\n  return (\n    <div className=\"my-2\">\n      <h2>Our Items:</h2>\n      {state.items.length ? (\n        <div className=\"flex-row\">\n          {filterItems().map((item) => (\n            <Item\n              key={item._id}\n              _id={item._id}\n              image={item.image}\n              name={item.name}\n              price={item.price}\n              quantity={item.quantity}\n            />\n          ))}\n        </div>\n      ) : (\n        <h3>You haven't added any items yet!</h3>\n      )}\n      {loading ? <img src={spinner} alt=\"loading\" /> : null}\n    </div>\n  );\n}\n\nexport default ItemList;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,IAAI,MAAM,SAAS;AAC1B,SAASC,eAAe,QAAQ,yBAAyB;AACzD,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,QAAQ,QAAQ,gBAAgB;AACzC,SAASC,WAAW,QAAQ,qBAAqB;AACjD,SAASC,UAAU,QAAQ,qBAAqB;AAChD,OAAOC,OAAO,MAAM,0BAA0B;AAAC;AAE/C,SAASC,QAAQ,GAAG;EAAA;EAClB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGR,eAAe,EAAE;EAE3C,MAAM;IAAES;EAAgB,CAAC,GAAGF,KAAK;EAEjC,MAAM;IAAEG,OAAO;IAAEC;EAAK,CAAC,GAAGT,QAAQ,CAACC,WAAW,CAAC;EAE/CL,SAAS,CAAC,MAAM;IACd,IAAIa,IAAI,EAAE;MACRH,QAAQ,CAAC;QACPI,IAAI,EAAEX,YAAY;QAClBY,KAAK,EAAEF,IAAI,CAACE;MACd,CAAC,CAAC;MACFF,IAAI,CAACE,KAAK,CAACC,OAAO,CAAEC,IAAI,IAAK;QAC3BX,UAAU,CAAC,OAAO,EAAE,KAAK,EAAEW,IAAI,CAAC;MAClC,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI,CAACL,OAAO,EAAE;MACnBN,UAAU,CAAC,OAAO,EAAE,KAAK,CAAC,CAACY,IAAI,CAAEH,KAAK,IAAK;QACzCL,QAAQ,CAAC;UACPI,IAAI,EAAEX,YAAY;UAClBY,KAAK,EAAEA;QACT,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACF,IAAI,EAAED,OAAO,EAAEF,QAAQ,CAAC,CAAC;EAE7B,SAASS,WAAW,GAAG;IACrB,IAAI,CAACR,eAAe,EAAE;MACpB,OAAOF,KAAK,CAACM,KAAK;IACpB;IAEA,OAAON,KAAK,CAACM,KAAK,CAACK,MAAM,CACtBH,IAAI,IAAKA,IAAI,CAACI,QAAQ,CAACC,GAAG,KAAKX,eAAe,CAChD;EACH;EAEA,oBACE;IAAK,SAAS,EAAC,MAAM;IAAA,wBACnB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAmB,EAClBF,KAAK,CAACM,KAAK,CAACQ,MAAM,gBACjB;MAAK,SAAS,EAAC,UAAU;MAAA,UACtBJ,WAAW,EAAE,CAACK,GAAG,CAAEP,IAAI,iBACtB,QAAC,IAAI;QAEH,GAAG,EAAEA,IAAI,CAACK,GAAI;QACd,KAAK,EAAEL,IAAI,CAACQ,KAAM;QAClB,IAAI,EAAER,IAAI,CAACS,IAAK;QAChB,KAAK,EAAET,IAAI,CAACU,KAAM;QAClB,QAAQ,EAAEV,IAAI,CAACW;MAAS,GALnBX,IAAI,CAACK,GAAG;QAAA;QAAA;QAAA;MAAA,QAOhB;IAAC;MAAA;MAAA;MAAA;IAAA,QACE,gBAEN;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QACD,EACAV,OAAO,gBAAG;MAAK,GAAG,EAAEL,OAAQ;MAAC,GAAG,EAAC;IAAS;MAAA;MAAA;MAAA;IAAA,QAAG,GAAG,IAAI;EAAA;IAAA;IAAA;IAAA;EAAA,QACjD;AAEV;AAAC,GA1DQC,QAAQ;EAAA,QACWN,eAAe,EAIfE,QAAQ;AAAA;AAAA,KAL3BI,QAAQ;AA4DjB,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module"}